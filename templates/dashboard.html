<!-- templates/dashboard.html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dashboard | Billing Management System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
</head>
<body>
    <div class="app-layout">
        <nav class="sidebar">
            <div class="sidebar-profile">
                <div class="profile-icon">
                    <img src="{{ url_for('static', filename='icons/user.svg') }}" alt="User Icon">
                </div>
                <span class="profile-name">admin</span>
            </div>

            <div class="sidebar-nav">
                <a href="{{ url_for('dashboard') }}" class="nav-link active">Billing Calculator</a>
                <a href="{{ url_for('customers') }}" class="nav-link">User Management</a>
            </div>

            <div class="sidebar-footer">
                <div class="theme-switcher">
                    <img src="" id="theme-icon" alt="Theme Toggle">
                </div>
                <a href="{{ url_for('logout') }}" class="sidebar-logout">Logout</a>
            </div>
        </nav>

        <main class="main-content">
            <div class="page-header">
                <h1>Billing Calculator</h1>
            </div>

            <div class="calculator-container">
                <section class="controls-section">
                    <h2>Select Customer and Date Range</h2>

                    <div class="form-group">
                        <label for="customer-select">Customer:</label>
                        <select id="customer-select" name="customer"><option value="">Loading...</option></select>
                    </div>

                    <div class="form-group">
                        <label for="date-range-picker">Billing Period:</label>
                        <input type="text" id="date-range-picker" placeholder="Pick Date Range">
                    </div>

                    <div class="form-group">
                        <label for="import-kwh-display">Import Amount (kWh):</label>
                        <input type="number" id="import-kwh-display" name="import_kwh_display" placeholder="0" disabled>
                    </div>

                    <div class="form-group">
                        <label for="export-kwh">Export Amount (kWh):</label>
                        <input type="number" id="export-kwh" name="export_kwh" step="0.01" placeholder="e.g. 250">
                    </div>

                    <div class="form-group">
                        <label for="import-rate">Import Rate (RM/kWh):</label>
                        <input type="number" id="import-rate" name="import_rate" step="0.01" value="0.40">
                    </div>

                    <div class="form-group">
                        <label for="export-rate">Export Rate (RM/kWh):</label>
                        <input type="number" id="export-rate" name="export_rate" step="0.01" placeholder="e.g. 0.20">
                    </div>

                    <button id="calculate-btn">Calculate Bill</button>
                </section>

                <section class="results-section">
                    <h2>Billing Summary</h2>
                    <div class="results-grid">
                        <div class="result-item"><span class="label">Selected Period:</span><span id="result-period" class="value">--</span></div>
                        <div class="result-item"><span class="label">Start Reading (kWh):</span><span id="result-start-kwh" class="value">--</span></div>
                        <div class="result-item"><span class="label">End Reading (kWh):</span><span id="result-end-kwh" class="value">--</span></div>
                        <div class="result-item"><span class="label">Total Generated (kWh):</span><span id="result-total-kwh" class="value">--</span></div>
                        <div class="result-item"><span class="label">Import (kWh):</span><span id="result-import-kwh" class="value">--</span></div>
                        <div class="result-item"><span class="label">Export (kWh):</span><span id="result-export-kwh" class="value">--</span></div>
                        <div class="result-item"><span class="label">Import Cost (RM):</span><span id="result-import-cost" class="value">--</span></div>
                        <div class="result-item"><span class="label">Export Revenue (RM):</span><span id="result-export-cost" class="value">--</span></div>
                    </div>
                    <div class="total-bill">
                        <span class="label">Total Bill (RM):</span><span id="result-total-bill" class="value-total">--</span>
                    </div>
                </section>
            </div>
            <footer>
                <img id="footer-logo" src="" alt="Emit Solar Logo" class="footer-logo">
                <p>Solar Billing Management System by Hee Zi Jie Â© 2025</p>
            </footer>
        </main>
    </div>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>